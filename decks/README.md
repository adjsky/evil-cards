# Наборы карт

Здесь вы можете найти наборы карт, используемые в игре.

По умолчанию в игре предоставляются два набора карт:

1. Обычный (оригинальный)
2. Twitch friendly (карты без банвордов и т.д.)

Также пользователям предоставляется возможность загружать свои кастомные наборы
карт. Подробнее об этом в следующем блоке.

## Кастомные наборы карт

У хоста комнаты есть возможность загрузить кастомный набор карт. Для этого нужно
в созданной комнате открыть вкладку `Настройки` и в пункте `Набор карт` выбрать
вариант `Кастомный`, после чего откроется модальное окно с выбором файла, в
котором находятся все необходимые карты.

Какой файл нужно загружать? Как его создать? Что в нем должно быть?

Для того, чтобы файл с картами был успешно "съеден" игрой, он должен
соответствовать следующим требованиям:

1. Файл должен иметь формат [TSV](https://ru.wikipedia.org/wiki/TSV).
2. В файле должно быть две колонки, первая колонка - цвет карточки (`color`),
   доступные значения: `red` или `white`, вторая колонка - текст карточки
   (`text`), он не может содержать символ табуляции `\t` и его длина не должна
   превышать 120 символов.
3. Красных карт должно быть минимум 100.
4. Белых карт должно быть минимум 400.

> [!NOTE]
>
> 1. Парсер игнорирует ведущие и конечные символы пробела и терминатора строки.
> 2. Текст карточек может дублироваться.

Если файл соответствует всем требованиям, набор карт будет успешно загружен с
уведомлением `Набор карт успешно загружен.`, если файл не соответствует хотя бы
одному требованию, набор карт не будет загружен с уведомлением `Не удалось
загрузить набор карт. Детали ошибки можно посмотреть в консоли.`, в этом случае
детали ошибки можно будет посмотреть в консоли разработчика.

Для ознакомления дополнительно предоставлен файл `template.tsv`, который можно
использовать как шаблон для создания своих наборов карт.

Если у вас возникнут какие-либо сложности, вы можете завести issue в
[GitHub'е](https://github.com/adjsky/evil-cards/issues/new) или написать мне в
[телеграм](https://t.me/adjsky).

## Добавление наборов карт по-умолчанию

На данный момент нет возможности добавить набор карт без изменений в исходном
коде игры. Если вы все же хотите, чтобы ваш набор карт можно было выбрать
отделньо, вам нужно внести необходимые изменения и открыть [PR](https://github.com/adjsky/evil-cards/pulls).

Порядок действий:

1. Собрать карты в необходимом формате (детали блоком выше).

2. Выполнить все действия из [CONTRIBUTING.md](https://github.com/adjsky/evil-cards/blob/master/CONTRIBUTING.md).

3. Добавить собранный набор карт в папке `/decks` в корне репозитория.

> [!NOTE]
> Имя файла набора карт - название набора + `.tsv`. Название набора в исходном
> коде должно быть только латиницей и должно отражать суть набора.

4. Добавить название набора в разрешенный список наборов карт для парсера. Для
   этого вам нужно перейти в файл `packages/core/lib/deck-parser.ts` и добавить
   название набора в `AvailableDeckNames` и `availableDecks`.

5. Добавить набор в список опций наборов карт на сайте. Для этого вам нужно
   перейти в файл `apps/client/src/components/configuration.tsx` и добавить
   название набора и его "UI-friendly" название в `deckOptions`.

Если у вас возникнут какие-либо сложности, вы можете завести issue в
[GitHub'е](https://github.com/adjsky/evil-cards/issues/new) или написать мне в
[телеграм](https://t.me/adjsky).
